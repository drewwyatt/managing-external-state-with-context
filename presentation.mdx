import './script'
import { Head, Appear, Image, withDeck } from 'mdx-deck'  // https://github.com/jxnblk/mdx-deck
import { CodeSurfer } from 'mdx-deck-code-surfer' // https://elijahmanor.com/code-surfer/
import {
  clockClassSnippets,
  ClockClass,
  CodeBlock,
  state,
} from './components'

export { monokai as theme } from './components'

<Head>
  <title>Context</title>
</Head>

# Managing State with Hooks and Context

<Appear>
  or: how to not go crazy when working with non-react-like SDKs
</Appear>

---

<h1>Drew Wyatt</h1>
<p>Software Engineer at Peloton</p>
<p>@drewwyatt | @djwyatt</p>

---

<Image
  src="/images/peloton-player.png"
  size="contain"
  style={{
    display: 'flex',
    justifyContent: 'center',
    alignItems: 'flex-end',
  }}
>
  <Appear>
    <h1>This is a thing I work on</h1>
  </Appear>
</Image>

---

# It uses JWPlayer

<Appear>
  (JWPlayer is pretty imperative)
</Appear>

---

<CodeSurfer
  title="JWPlayer's API looks like this"
  code={require("raw-loader!./snippets/jwplayer/setup.snippet")}
/>

---

<CodeSurfer
  title="You can attach listeners"
  code={require("raw-loader!./snippets/jwplayer/listeners.snippet")}
/>

---

<CodeSurfer
  title="You can set things"
  code={require("raw-loader!./snippets/jwplayer/actions.snippet")}
/>

---

### What (I assume) goes through most react developer's heads when this happens

<div style={{ textAlign: 'left' }}>
  <Appear>
    <p>ğŸ¤¦â€&nbsp;this doesn't feel very react-like</p>
    <p>ğŸ‘&nbsp;it's okay though, we can write an adapter</p>
    <p>ğŸ˜&nbsp;this might even be fun!</p>
    <p>ğŸ’¡&nbsp;let's use a component class</p>
  </Appear>
</div>

---

# ğŸš« Wait a sec ğŸš«

<ul style={{ textAlign: 'left' }}>
  <li>Video player logic can be complex and esoteric</li>
  <li>There is a lot of boilerplate</li>
  <li>I only have 30 minutes</li>
</ul>

---

#### I did my best to reproduce the problem with a Clock

ğŸ•”

---

<CodeSurfer
  title="You can attach listeners"
  code={require("raw-loader!./snippets/time/listeners.snippet")}
/>

---

<CodeSurfer
  title="You can set things"
  code={require("raw-loader!./snippets/time/actions.snippet")}
/>

---

<CodeSurfer
  title="You can get things"
  code={require("raw-loader!./snippets/time/getters.snippet")}
/>

---

# Back to making a component class...

---

<CodeBlock>{clockClassSnippets.one}</CodeBlock>

---

<CodeBlock>{clockClassSnippets.two}</CodeBlock>

---

<CodeBlock>{clockClassSnippets.three}</CodeBlock>

---

<CodeBlock>{clockClassSnippets.four}</CodeBlock>

---

<CodeBlock>{clockClassSnippets.five}</CodeBlock>

---

<ClockClass />

<Appear>
  It works!
</Appear>

---

### What's not to love?

<div style={{ textAlign: 'left' }}>
  <Appear>
    <p>ğŸ’”&nbsp;there's a lot going on in a single component/class</p>
    <p>ğŸ’”&nbsp;difficult/messy to test</p>
    <p>ğŸ’”&nbsp;not easy to share</p>
  </Appear>
</div>

---

# Let's try to split this up

---

<CodeBlock>{state.snippets.one}</CodeBlock>

---

<CodeBlock>{state.snippets.two}</CodeBlock>

---

<CodeBlock>{state.snippets.three}</CodeBlock>

---

ğŸ‘‹
